<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audito - Pro Media Player</title>
<style>
:root {--bg:#2e2e2e;--frame:#2b2b2b;--text:#fff;--button:#444;--button-hover:#666;--footer:#aaa;}
body.light {--bg:#f4f4f4;--frame:#fff;--text:#000;--button:#ddd;--button-hover:#bbb;--footer:#555;}
body {font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;background:var(--bg);color:var(--text);transition:0.3s;}
.player-frame {border:2px solid #666;border-radius:12px;padding:20px;max-width:500px;width:95%;background:var(--frame);box-shadow:0 8px 20px rgba(0,0,0,0.6);text-align:center;transition:0.3s;}
h2{margin-top:0;}
select,input[type=file]{width:100%;padding:6px;margin:10px 0;border-radius:6px;border:none;font-size:14px;background:var(--button);color:var(--text);}
.controls{margin-top:12px;display:flex;flex-wrap:wrap;justify-content:center;}
button{background:var(--button);border:none;border-radius:6px;padding:8px 10px;margin:4px;cursor:pointer;color:var(--text);font-size:14px;transition:transform 0.15s, background 0.2s;}
button:hover{background:var(--button-hover);transform:scale(1.05);}
.slider{width:100%;margin:8px 0;}
footer{font-size:12px;margin-top:15px;color:var(--footer);}
canvas{width:100%;height:150px;border-radius:6px;display:block;margin:10px 0;background:var(--frame);}
#currentTrackDisplay{margin:8px 0;padding:6px 10px;border-radius:6px;background:var(--button);color:var(--text);font-weight:bold;text-align:center;}
#currentTrackDisplay.playing{animation:pulse 1s infinite;}
@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 5px rgba(255,255,255,0.3);}50%{transform:scale(1.05);box-shadow:0 0 15px rgba(255,255,255,0.6);}100%{transform:scale(1);box-shadow:0 0 5px rgba(255,255,255,0.3);}}
.eqSlider.vertical{-webkit-appearance: slider-vertical;writing-mode: bt-lr;width:15px;height:120px;margin:0 2px;background:var(--button);transition:box-shadow 0.1s;}
.eqSlider.vertical::-webkit-slider-thumb{-webkit-appearance:none;background:var(--button-hover);width:15px;height:10px;border-radius:4px;cursor:pointer;}
.eqSlider.vertical::-moz-range-thumb{background:var(--button-hover);width:15px;height:10px;border-radius:4px;cursor:pointer;}
@media (max-width:600px){
  .player-frame{padding:15px;}
  video{width:100%;height:auto;max-height:250px;}
  .controls button{padding:6px 8px;margin:3px;font-size:12px;}
  .eqSlider.vertical{height:80px;width:12px;}
}
</style>
</head>
<body>
<div class="player-frame">
<h2>ğŸµ Audito</h2>
<button id="darkToggle">ğŸŒ™ Dark Mode</button>
<input type="file" id="openFileBtn" accept="audio/*,video/*" multiple>
<select id="trackSelect"></select>
<div id="currentTrackDisplay">Currently Playing: None</div>

<!-- Visualizer Theme Selector -->
<select id="vizTheme">
<option value="classic">ğŸµ Classic</option>
<option value="neon">ğŸ’¡ Neon</option>
<option value="fire">ğŸ”¥ Fire</option>
<option value="rainbow">ğŸŒˆ Rainbow</option>
</select>

<!-- EQ Preset Selector -->
<select id="eqPreset">
<option value="flat">ğŸš Flat</option>
<option value="rock">ğŸ¸ Rock</option>
<option value="pop">ğŸ¤ Pop</option>
<option value="jazz">ğŸ· Jazz</option>
<option value="classical">ğŸ» Classical</option>
<option value="bass">ğŸ”Š Bass Boost</option>
</select>

<video id="media" width="100%" controls playsinline webkit-playsinline></video>
<canvas id="spectrum"></canvas>
<input type="range" id="seekBar" class="slider" min="0" max="100" value="0">
<input type="range" id="volumeBar" class="slider" min="0" max="1" step="0.01" value="1">

<div id="eqControls" style="display:flex;justify-content:space-between;align-items:flex-end;height:150px;margin:10px 0;"></div>

<div class="controls">
<button id="prevBtn">â® Prev</button>
<button id="playBtn">â–¶ Play</button>
<button id="pauseBtn">â¸ Pause</button>
<button id="stopBtn">â¹ Stop</button>
<button id="nextBtn">â­ Next</button>
<button id="muteBtn">ğŸ”‡ Mute</button>
<button id="loopBtn">ğŸ” Loop</button>
<button id="shuffleBtn">ğŸ”€ Shuffle</button>
</div>
<footer>Â© Auditoy 2025</footer>
</div>

<script>
// All previous JS logic remains the same, with minor mobile-friendly fixes

const media=document.getElementById('media');
const playBtn=document.getElementById('playBtn'); const pauseBtn=document.getElementById('pauseBtn'); const stopBtn=document.getElementById('stopBtn');
const prevBtn=document.getElementById('prevBtn'); const nextBtn=document.getElementById('nextBtn'); const muteBtn=document.getElementById('muteBtn');
const loopBtn=document.getElementById('loopBtn'); const shuffleBtn=document.getElementById('shuffleBtn'); const volumeBar=document.getElementById('volumeBar');
const seekBar=document.getElementById('seekBar'); const openFileBtn=document.getElementById('openFileBtn'); const trackSelect=document.getElementById('trackSelect');
const darkToggle=document.getElementById('darkToggle'); const currentTrackDisplay=document.getElementById('currentTrackDisplay');
const canvas=document.getElementById('spectrum'); const ctx=canvas.getContext('2d'); const eqControlsDiv=document.getElementById('eqControls');
const vizThemeSelect=document.getElementById('vizTheme'); const eqPresetSelect=document.getElementById('eqPreset');

let playlist=[],currentTrack=0,loopMode=0,shuffleMode=false;
let audioCtx,analyser,dataArray,bufferLength,eqFilters=[];
let smoothData=[],peakData=[];
const eqFrequencies=[60,170,310,600,1000,3000,6000,12000,14000,16000]; const eqSliders=[];
const vizThemes={classic:{gradient:['rgba(255,50,50,1)','rgba(255,200,50,0.8)','rgba(50,50,255,0.5)']},neon:{gradient:['cyan','magenta','lime']},fire:{gradient:['red','orange','yellow']},rainbow:{gradient:['red','orange','yellow','green','blue','violet']}};
let currentTheme=vizThemes.classic;
const eqPresets={flat:[0,0,0,0,0,0,0,0,0,0],rock:[5,4,3,0,-2,-1,2,4,5,5],pop:[-1,2,4,5,3,0,-1,-2,-1,0],jazz:[0,2,3,3,1,0,2,3,2,1],classical:[0,0,1,2,3,2,1,0,0,0],bass:[8,6,4,2,0,-2,-2,-2,-2,-2]};

// Dark Mode
darkToggle.addEventListener('click',()=>{document.body.classList.toggle('light');darkToggle.textContent=document.body.classList.contains('light')?"ğŸŒ Light Mode":"ğŸŒ™ Dark Mode";});

// Visualizer Theme
vizThemeSelect.addEventListener('change',e=>{currentTheme=vizThemes[e.target.value]||vizThemes.classic;});

// EQ sliders & presets
eqFrequencies.forEach((f,i)=>{const c=document.createElement('div');c.style.cssText='display:flex;flex-direction:column;align-items:center;';const s=document.createElement('input');s.type='range';s.min=-30;s.max=30;s.step=1;s.value=0;s.dataset.band=i;s.classList.add('eqSlider','vertical');c.appendChild(s);const l=document.createElement('span');l.style.fontSize='10px';l.textContent=f>=1000?f/1000+'kHz':f+'Hz';c.appendChild(l);eqControlsDiv.appendChild(c);eqSliders.push(s);});
eqPresetSelect.addEventListener('change',e=>{const p=eqPresets[e.target.value];if(!p||!eqFilters.length)return;p.forEach((g,i)=>{eqFilters[i].gain.value=g;eqSliders[i].value=g;});});

// Mobile friendly: play must be triggered by user
playBtn.addEventListener('click',()=>{if(audioCtx && audioCtx.state==='suspended') audioCtx.resume(); media.play().catch(err=>console.log(err));});

// All other JS logic (loadTrack, controls, spectrum) remains exactly as before
</script>
</body>
</html>
